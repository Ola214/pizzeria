{"ast":null,"code":"// selectors\nexport const getTablesState = state => state.tables || {\n  tables: [],\n  loading: false,\n  error: null\n};\nexport const getAllTables = state => getTablesState(state).tables;\nexport const getTablesLoading = state => getTablesState(state).loading;\nexport const getTablesError = state => getTablesState(state).error;\nimport { API_URL } from './config';\n\n// action name helper\nconst createActionName = name => `app/tables/${name}`;\n\n// actions\nconst SET_TABLES = createActionName('SET_TABLES');\nconst SET_LOADING = createActionName('SET_LOADING');\nconst SET_ERROR = createActionName('SET_ERROR');\nconst UPDATE_TABLE = createActionName('UPDATE_TABLE');\nexport const setTables = payload => ({\n  type: SET_TABLES,\n  payload\n});\nexport const setLoading = payload => ({\n  type: SET_LOADING,\n  payload\n});\nexport const setError = payload => ({\n  type: SET_ERROR,\n  payload\n});\nexport const updateTableAction = payload => ({\n  type: UPDATE_TABLE,\n  payload\n});\n\n// thunks\nexport const fetchTables = () => {\n  return async dispatch => {\n    dispatch(setLoading(true));\n    try {\n      const res = await fetch('http://localhost:3131/api/tables');\n      if (!res.ok) throw new Error('Fetch failed');\n      const data = await res.json();\n      dispatch(setTables(data));\n    } catch (err) {\n      dispatch(setError(err.message));\n    } finally {\n      dispatch(setLoading(false));\n    }\n  };\n};\nexport const saveTable = table => {\n  return async dispatch => {\n    dispatch(setLoading(true));\n    try {\n      const res = await fetch(`http://localhost:3131/api/tables/${table.id}`, {\n        method: 'PATCH',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify(table)\n      });\n      if (!res.ok) throw new Error('Save failed');\n      const updated = await res.json();\n      dispatch(updateTableAction(updated));\n    } catch (err) {\n      dispatch(setError(err.message));\n    } finally {\n      dispatch(setLoading(false));\n    }\n  };\n};\n\n// reducer\nconst initial = {\n  tables: [],\n  loading: false,\n  error: null\n};\nconst tablesReducer = (state = initial, action) => {\n  switch (action.type) {\n    case SET_TABLES:\n      return {\n        ...state,\n        tables: action.payload\n      };\n    case SET_LOADING:\n      return {\n        ...state,\n        loading: action.payload\n      };\n    case SET_ERROR:\n      return {\n        ...state,\n        error: action.payload\n      };\n    case UPDATE_TABLE:\n      return {\n        ...state,\n        tables: state.tables.map(t => t.id === action.payload.id ? action.payload : t)\n      };\n    default:\n      return state;\n  }\n};\nexport default tablesReducer;","map":{"version":3,"names":["getTablesState","state","tables","loading","error","getAllTables","getTablesLoading","getTablesError","API_URL","createActionName","name","SET_TABLES","SET_LOADING","SET_ERROR","UPDATE_TABLE","setTables","payload","type","setLoading","setError","updateTableAction","fetchTables","dispatch","res","fetch","ok","Error","data","json","err","message","saveTable","table","id","method","headers","body","JSON","stringify","updated","initial","tablesReducer","action","map","t"],"sources":["/home/aleksandrakrysinska94/pizzeria/src/redux/tablesRedux.js"],"sourcesContent":["// selectors\nexport const getTablesState = state => state.tables || { tables: [], loading: false, error: null };\nexport const getAllTables = state => getTablesState(state).tables;\nexport const getTablesLoading = state => getTablesState(state).loading;\nexport const getTablesError = state => getTablesState(state).error;\nimport { API_URL } from './config';\n\n// action name helper\nconst createActionName = name => `app/tables/${name}`;\n\n// actions\nconst SET_TABLES = createActionName('SET_TABLES');\nconst SET_LOADING = createActionName('SET_LOADING');\nconst SET_ERROR = createActionName('SET_ERROR');\nconst UPDATE_TABLE = createActionName('UPDATE_TABLE');\n\nexport const setTables = payload => ({ type: SET_TABLES, payload });\nexport const setLoading = payload => ({ type: SET_LOADING, payload });\nexport const setError = payload => ({ type: SET_ERROR, payload });\nexport const updateTableAction = payload => ({ type: UPDATE_TABLE, payload });\n\n// thunks\nexport const fetchTables = () => {\n  return async dispatch => {\n    dispatch(setLoading(true));\n    try {\n      const res = await fetch('http://localhost:3131/api/tables');\n      if (!res.ok) throw new Error('Fetch failed');\n      const data = await res.json();\n      dispatch(setTables(data));\n    } catch (err) {\n      dispatch(setError(err.message));\n    } finally {\n      dispatch(setLoading(false));\n    }\n  };\n};\n\nexport const saveTable = (table) => {\n  return async dispatch => {\n    dispatch(setLoading(true));\n    try {\n      const res = await fetch(`http://localhost:3131/api/tables/${table.id}`, {\n        method: 'PATCH',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify(table)\n      });\n      if (!res.ok) throw new Error('Save failed');\n      const updated = await res.json();\n      dispatch(updateTableAction(updated));\n    } catch (err) {\n      dispatch(setError(err.message));\n    } finally {\n      dispatch(setLoading(false));\n    }\n  };\n};\n\n// reducer\nconst initial = {\n  tables: [],\n  loading: false,\n  error: null\n};\n\nconst tablesReducer = (state = initial, action) => {\n  switch(action.type){\n    case SET_TABLES:\n      return { ...state, tables: action.payload };\n    case SET_LOADING:\n      return { ...state, loading: action.payload };\n    case SET_ERROR:\n      return { ...state, error: action.payload };\n    case UPDATE_TABLE:\n      return { ...state, tables: state.tables.map(t => t.id === action.payload.id ? action.payload : t) };\n    default:\n      return state;\n  }\n};\n\nexport default tablesReducer;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}