{"ast":null,"code":"import _objectSpread from\"/home/aleksandrakrysinska94/pizzeria/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";// selectors\nexport const getTablesState=state=>state.tables||{tables:[],loading:false,error:null};export const getAllTables=state=>getTablesState(state).tables;export const getTablesLoading=state=>getTablesState(state).loading;export const getTablesError=state=>getTablesState(state).error;import{API_URL}from'../config';// action name helper\nconst createActionName=name=>\"app/tables/\".concat(name);// actions\nconst SET_TABLES=createActionName('SET_TABLES');const SET_LOADING=createActionName('SET_LOADING');const SET_ERROR=createActionName('SET_ERROR');const UPDATE_TABLE=createActionName('UPDATE_TABLE');export const setTables=payload=>({type:SET_TABLES,payload});export const setLoading=payload=>({type:SET_LOADING,payload});export const setError=payload=>({type:SET_ERROR,payload});export const updateTableAction=payload=>({type:UPDATE_TABLE,payload});// thunks\nexport const fetchTables=()=>{return async dispatch=>{dispatch(setLoading(true));try{const res=await fetch('${API_URL}/api/tables');if(!res.ok)throw new Error('Fetch failed');const data=await res.json();dispatch(setTables(data));}catch(err){dispatch(setError(err.message));}finally{dispatch(setLoading(false));}};};export const saveTable=table=>{return async dispatch=>{dispatch(setLoading(true));try{const res=await fetch(\"\".concat(API_URL,\"/api/tables/\").concat(table.id),{method:'PATCH',headers:{'Content-Type':'application/json'},body:JSON.stringify(table)});if(!res.ok)throw new Error('Save failed');const updated=await res.json();dispatch(updateTableAction(updated));}catch(err){dispatch(setError(err.message));}finally{dispatch(setLoading(false));}};};// reducer\nconst initial={tables:[],loading:false,error:null};const tablesReducer=function(){let state=arguments.length>0&&arguments[0]!==undefined?arguments[0]:initial;let action=arguments.length>1?arguments[1]:undefined;switch(action.type){case SET_TABLES:return _objectSpread(_objectSpread({},state),{},{tables:action.payload});case SET_LOADING:return _objectSpread(_objectSpread({},state),{},{loading:action.payload});case SET_ERROR:return _objectSpread(_objectSpread({},state),{},{error:action.payload});case UPDATE_TABLE:return _objectSpread(_objectSpread({},state),{},{tables:state.tables.map(t=>t.id===action.payload.id?action.payload:t)});default:return state;}};export default tablesReducer;","map":{"version":3,"names":["getTablesState","state","tables","loading","error","getAllTables","getTablesLoading","getTablesError","API_URL","createActionName","name","concat","SET_TABLES","SET_LOADING","SET_ERROR","UPDATE_TABLE","setTables","payload","type","setLoading","setError","updateTableAction","fetchTables","dispatch","res","fetch","ok","Error","data","json","err","message","saveTable","table","id","method","headers","body","JSON","stringify","updated","initial","tablesReducer","arguments","length","undefined","action","_objectSpread","map","t"],"sources":["/home/aleksandrakrysinska94/pizzeria/src/redux/tablesRedux.js"],"sourcesContent":["// selectors\nexport const getTablesState = state => state.tables || { tables: [], loading: false, error: null };\nexport const getAllTables = state => getTablesState(state).tables;\nexport const getTablesLoading = state => getTablesState(state).loading;\nexport const getTablesError = state => getTablesState(state).error;\nimport { API_URL } from '../config';\n\n// action name helper\nconst createActionName = name => `app/tables/${name}`;\n\n// actions\nconst SET_TABLES = createActionName('SET_TABLES');\nconst SET_LOADING = createActionName('SET_LOADING');\nconst SET_ERROR = createActionName('SET_ERROR');\nconst UPDATE_TABLE = createActionName('UPDATE_TABLE');\n\nexport const setTables = payload => ({ type: SET_TABLES, payload });\nexport const setLoading = payload => ({ type: SET_LOADING, payload });\nexport const setError = payload => ({ type: SET_ERROR, payload });\nexport const updateTableAction = payload => ({ type: UPDATE_TABLE, payload });\n\n// thunks\nexport const fetchTables = () => {\n  return async dispatch => {\n    dispatch(setLoading(true));\n    try {\n      const res = await fetch('${API_URL}/api/tables');\n      if (!res.ok) throw new Error('Fetch failed');\n      const data = await res.json();\n      dispatch(setTables(data));\n    } catch (err) {\n      dispatch(setError(err.message));\n    } finally {\n      dispatch(setLoading(false));\n    }\n  };\n};\n\nexport const saveTable = (table) => {\n  return async dispatch => {\n    dispatch(setLoading(true));\n    try {\n      const res = await fetch(`${API_URL}/api/tables/${table.id}`, {\n        method: 'PATCH',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify(table)\n      });\n      if (!res.ok) throw new Error('Save failed');\n      const updated = await res.json();\n      dispatch(updateTableAction(updated));\n    } catch (err) {\n      dispatch(setError(err.message));\n    } finally {\n      dispatch(setLoading(false));\n    }\n  };\n};\n\n// reducer\nconst initial = {\n  tables: [],\n  loading: false,\n  error: null\n};\n\nconst tablesReducer = (state = initial, action) => {\n  switch(action.type){\n    case SET_TABLES:\n      return { ...state, tables: action.payload };\n    case SET_LOADING:\n      return { ...state, loading: action.payload };\n    case SET_ERROR:\n      return { ...state, error: action.payload };\n    case UPDATE_TABLE:\n      return { ...state, tables: state.tables.map(t => t.id === action.payload.id ? action.payload : t) };\n    default:\n      return state;\n  }\n};\n\nexport default tablesReducer;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}